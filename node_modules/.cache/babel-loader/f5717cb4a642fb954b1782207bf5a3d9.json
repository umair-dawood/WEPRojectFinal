{"ast":null,"code":"var _jsxFileName = \"/Users/maazasim/homeelectronics/src/Components/Add.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport AddItemModal from \"./AddItemModal\";\nimport \"./forms.scss\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../actions/pos\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar cart = [];\nconst products = [];\nconst intialvalues = {\n  ItemSKU: \"\",\n  ItemQuantity: 1,\n  ItemPrice: 0\n};\nvar tableRowIndex = 0; //TableRow\n\nfunction TableRow(_ref, props) {\n  _s();\n\n  let {\n    row,\n    handleDataChange,\n    deleteRow\n  } = _ref;\n  var price,\n      quantity = 0;\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = e => {\n    const suggestions = [\"123\", \"456\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(suggestion => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1);\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n    handleInputChange(e);\n  };\n\n  const onClick = e => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n\n  const onKeyDown = e => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"autocomplete\",\n          children: filtered.map((suggestion, index) => {\n            let className;\n\n            if (index === active) {\n              className = \"active\";\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: className,\n              onClick: onClick,\n              children: suggestion\n            }, suggestion, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-autocomplete\",\n          children: /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"No product found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  };\n\n  const [values, setValues] = useState(intialvalues);\n\n  function handleInputChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n    cart.push(values);\n  }\n\n  const index = row.index;\n  const [ItemQuantity, handleChangeItemQuantity] = useState(row.ItemQuantity);\n  const [ItemSKU, handleChangeItemSKU] = useState(row.ItemSKU);\n  const [ItemPrice, handleChangeItemPrice] = useState(row.ItemPrice);\n\n  const updateValues = e => {\n    var inputName = e.target.name;\n    var inputValue = e.target.value;\n\n    if (inputName == \"ItemQuantity\") {\n      handleChangeItemQuantity(inputValue);\n    } else if (inputName == \"ItemSKU\") {\n      handleChangeItemSKU(inputValue);\n    } else if (inputName == \"ItemPrice\") {\n      handleChangeItemPrice(inputValue);\n    }\n\n    handleDataChange({\n      index: index,\n      ItemQuantity: ItemQuantity,\n      ItemSKU: ItemSKU,\n      ItemPrice: ItemPrice\n    });\n  };\n\n  const removeRow = () => {\n    deleteRow(index);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n      scope: \"row\",\n      children: index\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-text js-input\",\n          type: \"text\",\n          onChange: onChange,\n          onKeyDown: onKeyDown,\n          name: \"ItemSKU\",\n          value: products[index]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), renderAutocomplete()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6 \",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"ItemQuantity\",\n          onChange: e => updateValues(e),\n          id: \"ItemQuantity\",\n          className: \"input-text js-input\",\n          type: \"Number\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6 \",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"ItemPrice\",\n          onChange: e => updateValues(e),\n          id: \"Price\",\n          className: \"input-text js-input\",\n          type: \"Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: [values.ItemPrice * values.ItemQuantity, \" PKR\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-remove\",\n        onClick: removeRow,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n} //Add\n\n\n_s(TableRow, \"EeZ4jgZpaM5QX6cozOj2Tf0wCMk=\");\n\n_c = TableRow;\n\nfunction Add(props) {\n  _s2();\n\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = e => {\n    const suggestions = [\"121241\", \"143123\", \"8471239\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(suggestion => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1);\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n  };\n\n  const onClick = e => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n\n  const onKeyDown = e => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"autocomplete\",\n          children: filtered.map((suggestion, index) => {\n            let className;\n\n            if (index === active) {\n              className = \"active\";\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: className,\n              onClick: onClick,\n              children: suggestion\n            }, suggestion, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-autocomplete\",\n          children: /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"Not found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  };\n\n  const [talbeRows, setRows] = useState([{\n    index: 0,\n    ItemSKU: \"\",\n    ItemQuantity: \"\",\n    ItemPrice: \"\"\n  }]);\n\n  const handleChange = data => {\n    talbeRows[data.index] = data;\n  };\n\n  const addNewRow = () => {\n    tableRowIndex = parseFloat(tableRowIndex) + 1;\n    var updatedRows = [...talbeRows];\n    updatedRows[tableRowIndex] = {\n      index: tableRowIndex,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\"\n    };\n    setRows(updatedRows);\n  };\n\n  const deleteRow = index => {\n    if (talbeRows.length > 1) {\n      var updatedRows = [...talbeRows];\n      var indexToRemove = updatedRows.findIndex(x => x.index == index);\n\n      if (indexToRemove > -1) {\n        updatedRows.splice(indexToRemove, 1);\n        setRows(updatedRows);\n      }\n    }\n  };\n\n  const handleKeyDown = (event, index) => {\n    if (event.key === \"Enter\") {\n      products.push(event.target.value);\n      addNewRow();\n      cart.push(values);\n      event.target.value = \"\";\n      console.log(cart);\n      console.log(...talbeRows);\n    }\n  };\n\n  const intialvalues = {\n    ItemSKU: \"\",\n    ItemQuantity: 0,\n    ItemPrice: 0\n  };\n  const [values, setValues] = useState(intialvalues);\n\n  const handleSubmit = e => {\n    console.log(...talbeRows);\n    actions.TableString.StringOfTable = \"Bill_Child_Temp\";\n    e.preventDefault();\n    console.log(TableRow);\n\n    for (let index = 0; index < talbeRows.length; index++) {\n      props.createPos(...talbeRows[index], () => {});\n    }\n\n    setRows([{\n      index: 0,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\"\n    }]);\n    window.alert(\"Product Added\");\n  };\n\n  function onKeyDownparent(event) {\n    onKeyDown(event);\n    handleKeyDown(event);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"pos\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"Point Of Sales Terminal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"contact-form row\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search__container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"product\",\n              className: \"search__input\",\n              type: \"text\",\n              placeholder: \"Enter Product Name\",\n              onChange: onChange,\n              onKeyDown: onKeyDownparent,\n              value: input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), renderAutocomplete(), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModal\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(AddItemModal, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            id: \"customers\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"thead-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Unit Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"SubTotal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: talbeRows.map((row, index) => {\n                if (row) return /*#__PURE__*/_jsxDEV(TableRow, {\n                  row: row,\n                  handleDataChange: handleChange,\n                  deleteRow: deleteRow\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-condensed table-bordered table-striped\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"pull-right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Items:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"total_quantity\",\n                      children: \"2.00\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Total: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"price_total\",\n                      children: \"6.00\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-field col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"btn btn-primary\",\n              value: \"Add Products\",\n              onClick: handleSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Add, \"8ti5ifqK88yUT+XY7UEJQiQPOt4=\");\n\n_c2 = Add;\n\nconst mapStateToProps = state => ({\n  poslist: state.pos.list\n});\n\nconst mapActionToProps = {\n  createPos: actions.create\n};\nexport default connect(mapStateToProps, mapActionToProps)(Add);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TableRow\");\n$RefreshReg$(_c2, \"Add\");","map":{"version":3,"sources":["/Users/maazasim/homeelectronics/src/Components/Add.js"],"names":["React","useState","AddItemModal","connect","actions","cart","products","intialvalues","ItemSKU","ItemQuantity","ItemPrice","tableRowIndex","TableRow","props","row","handleDataChange","deleteRow","price","quantity","active","setActive","filtered","setFiltered","isShow","setIsShow","input","setInput","onChange","e","suggestions","currentTarget","value","newFilteredSuggestions","filter","suggestion","toLowerCase","indexOf","handleInputChange","onClick","innerText","onKeyDown","keyCode","length","renderAutocomplete","map","index","className","values","setValues","name","target","push","handleChangeItemQuantity","handleChangeItemSKU","handleChangeItemPrice","updateValues","inputName","inputValue","removeRow","Add","talbeRows","setRows","handleChange","data","addNewRow","parseFloat","updatedRows","indexToRemove","findIndex","x","splice","handleKeyDown","event","key","console","log","handleSubmit","TableString","StringOfTable","preventDefault","createPos","window","alert","onKeyDownparent","mapStateToProps","state","poslist","pos","list","mapActionToProps","create"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAO,cAAP;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;;;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,MAAMC,QAAQ,GAAG,EAAjB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE,EADU;AAEnBC,EAAAA,YAAY,EAAE,CAFK;AAGnBC,EAAAA,SAAS,EAAE;AAHQ,CAArB;AAMA,IAAIC,aAAa,GAAG,CAApB,C,CAEA;;AACA,SAASC,QAAT,OAAwDC,KAAxD,EAA+D;AAAA;;AAAA,MAA7C;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,gBAAP;AAAyBC,IAAAA;AAAzB,GAA6C;AAC7D,MAAIC,KAAJ;AAAA,MACEC,QAAQ,GAAG,CADb;AAEA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACsB,MAAD,EAASC,SAAT,IAAsBvB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACwB,KAAD,EAAQC,QAAR,IAAoBzB,QAAQ,CAAC,EAAD,CAAlC;;AAEA,QAAM0B,QAAQ,GAAIC,CAAD,IAAO;AACtB,UAAMC,WAAW,GAAG,CAAC,KAAD,EAAQ,KAAR,CAApB;AACA,UAAMJ,KAAK,GAAGG,CAAC,CAACE,aAAF,CAAgBC,KAA9B;AACA,UAAMC,sBAAsB,GAAGH,WAAW,CAACI,MAAZ,CAC5BC,UAAD,IAAgBA,UAAU,CAACC,WAAX,GAAyBC,OAAzB,CAAiCX,KAAK,CAACU,WAAN,EAAjC,IAAwD,CAAC,CAD5C,CAA/B;AAGAf,IAAAA,SAAS,CAAC,CAAD,CAAT;AACAE,IAAAA,WAAW,CAACU,sBAAD,CAAX;AACAR,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAE,IAAAA,QAAQ,CAACE,CAAC,CAACE,aAAF,CAAgBC,KAAjB,CAAR;AACAM,IAAAA,iBAAiB,CAACT,CAAD,CAAjB;AACD,GAXD;;AAYA,QAAMU,OAAO,GAAIV,CAAD,IAAO;AACrBR,IAAAA,SAAS,CAAC,CAAD,CAAT;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAE,IAAAA,QAAQ,CAACE,CAAC,CAACE,aAAF,CAAgBS,SAAjB,CAAR;AACD,GALD;;AAMA,QAAMC,SAAS,GAAIZ,CAAD,IAAO;AACvB,QAAIA,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AACpBrB,MAAAA,SAAS,CAAC,CAAD,CAAT;AACAI,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAE,MAAAA,QAAQ,CAACL,QAAQ,CAACF,MAAD,CAAT,CAAR;AACD,KAJD,MAIO,IAAIS,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AAC3B,aAAOtB,MAAM,KAAK,CAAX,GAAe,IAAf,GAAsBC,SAAS,CAACD,MAAM,GAAG,CAAV,CAAtC;AACD,KAFM,MAEA,IAAIS,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AAC3B,aAAOtB,MAAM,GAAG,CAAT,KAAeE,QAAQ,CAACqB,MAAxB,GAAiC,IAAjC,GAAwCtB,SAAS,CAACD,MAAM,GAAG,CAAV,CAAxD;AACD;AACF,GAVD;;AAWA,QAAMwB,kBAAkB,GAAG,MAAM;AAC/B,QAAIpB,MAAM,IAAIE,KAAd,EAAqB;AACnB,UAAIJ,QAAQ,CAACqB,MAAb,EAAqB;AACnB,4BACE;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA,oBACGrB,QAAQ,CAACuB,GAAT,CAAa,CAACV,UAAD,EAAaW,KAAb,KAAuB;AACnC,gBAAIC,SAAJ;;AACA,gBAAID,KAAK,KAAK1B,MAAd,EAAsB;AACpB2B,cAAAA,SAAS,GAAG,QAAZ;AACD;;AACD,gCACE;AAAI,cAAA,SAAS,EAAEA,SAAf;AAA2C,cAAA,OAAO,EAAER,OAApD;AAAA,wBACGJ;AADH,eAA+BA,UAA/B;AAAA;AAAA;AAAA;AAAA,oBADF;AAKD,WAVA;AADH;AAAA;AAAA;AAAA;AAAA,gBADF;AAeD,OAhBD,MAgBO;AACL,4BACE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF;AAKD;AACF;;AACD,wBAAO,qCAAP;AACD,GA3BD;;AA6BA,QAAM,CAACa,MAAD,EAASC,SAAT,IAAsB/C,QAAQ,CAACM,YAAD,CAApC;;AACA,WAAS8B,iBAAT,CAA2BT,CAA3B,EAA8B;AAC5B,UAAM;AAAEqB,MAAAA,IAAF;AAAQlB,MAAAA;AAAR,QAAkBH,CAAC,CAACsB,MAA1B;AACAF,IAAAA,SAAS,CAAC,EACR,GAAGD,MADK;AAER,OAACE,IAAD,GAAQlB;AAFA,KAAD,CAAT;AAIA1B,IAAAA,IAAI,CAAC8C,IAAL,CAAUJ,MAAV;AACD;;AAED,QAAMF,KAAK,GAAG/B,GAAG,CAAC+B,KAAlB;AACA,QAAM,CAACpC,YAAD,EAAe2C,wBAAf,IAA2CnD,QAAQ,CAACa,GAAG,CAACL,YAAL,CAAzD;AACA,QAAM,CAACD,OAAD,EAAU6C,mBAAV,IAAiCpD,QAAQ,CAACa,GAAG,CAACN,OAAL,CAA/C;AACA,QAAM,CAACE,SAAD,EAAY4C,qBAAZ,IAAqCrD,QAAQ,CAACa,GAAG,CAACJ,SAAL,CAAnD;;AAEA,QAAM6C,YAAY,GAAI3B,CAAD,IAAO;AAC1B,QAAI4B,SAAS,GAAG5B,CAAC,CAACsB,MAAF,CAASD,IAAzB;AACA,QAAIQ,UAAU,GAAG7B,CAAC,CAACsB,MAAF,CAASnB,KAA1B;;AACA,QAAIyB,SAAS,IAAI,cAAjB,EAAiC;AAC/BJ,MAAAA,wBAAwB,CAACK,UAAD,CAAxB;AACD,KAFD,MAEO,IAAID,SAAS,IAAI,SAAjB,EAA4B;AACjCH,MAAAA,mBAAmB,CAACI,UAAD,CAAnB;AACD,KAFM,MAEA,IAAID,SAAS,IAAI,WAAjB,EAA8B;AACnCF,MAAAA,qBAAqB,CAACG,UAAD,CAArB;AACD;;AAED1C,IAAAA,gBAAgB,CAAC;AACf8B,MAAAA,KAAK,EAAEA,KADQ;AAEfpC,MAAAA,YAAY,EAAEA,YAFC;AAGfD,MAAAA,OAAO,EAAEA,OAHM;AAIfE,MAAAA,SAAS,EAAEA;AAJI,KAAD,CAAhB;AAMD,GAjBD;;AAmBA,QAAMgD,SAAS,GAAG,MAAM;AACtB1C,IAAAA,SAAS,CAAC6B,KAAD,CAAT;AACD,GAFD;;AAIA,sBACE;AAAA,4BACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA,gBAAiBA;AAAjB;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA,gCACE;AACE,UAAA,SAAS,EAAC,qBADZ;AAEE,UAAA,IAAI,EAAC,MAFP;AAGE,UAAA,QAAQ,EAAElB,QAHZ;AAIE,UAAA,SAAS,EAAEa,SAJb;AAKE,UAAA,IAAI,EAAC,SALP;AAME,UAAA,KAAK,EAAElC,QAAQ,CAACuC,KAAD;AANjB;AAAA;AAAA;AAAA;AAAA,gBADF,EASGF,kBAAkB,EATrB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eAeE;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,+BACE;AACE,UAAA,IAAI,EAAC,cADP;AAEE,UAAA,QAAQ,EAAGf,CAAD,IAAO2B,YAAY,CAAC3B,CAAD,CAF/B;AAGE,UAAA,EAAE,EAAC,cAHL;AAIE,UAAA,SAAS,EAAC,qBAJZ;AAKE,UAAA,IAAI,EAAC,QALP;AAME,UAAA,QAAQ;AANV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAfF,eA2BE;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,+BACE;AACE,UAAA,IAAI,EAAC,WADP;AAEE,UAAA,QAAQ,EAAGA,CAAD,IAAO2B,YAAY,CAAC3B,CAAD,CAF/B;AAGE,UAAA,EAAE,EAAC,OAHL;AAIE,UAAA,SAAS,EAAC,qBAJZ;AAKE,UAAA,IAAI,EAAC;AALP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA3BF,eAsCE;AAAA,iBACGmB,MAAM,CAACrC,SAAP,GAAmBqC,MAAM,CAACtC,YAD7B,EAEG,MAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YAtCF,eA0CE;AAAA,6BACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,gBAAhC;AAAiD,QAAA,OAAO,EAAEiD,SAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA1CF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkDD,C,CAED;;;GA5JS9C,Q;;KAAAA,Q;;AA6JT,SAAS+C,GAAT,CAAa9C,KAAb,EAAoB;AAAA;;AAClB,QAAM,CAACM,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACsB,MAAD,EAASC,SAAT,IAAsBvB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACwB,KAAD,EAAQC,QAAR,IAAoBzB,QAAQ,CAAC,EAAD,CAAlC;;AAEA,QAAM0B,QAAQ,GAAIC,CAAD,IAAO;AACtB,UAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,CAApB;AACA,UAAMJ,KAAK,GAAGG,CAAC,CAACE,aAAF,CAAgBC,KAA9B;AACA,UAAMC,sBAAsB,GAAGH,WAAW,CAACI,MAAZ,CAC5BC,UAAD,IAAgBA,UAAU,CAACC,WAAX,GAAyBC,OAAzB,CAAiCX,KAAK,CAACU,WAAN,EAAjC,IAAwD,CAAC,CAD5C,CAA/B;AAGAf,IAAAA,SAAS,CAAC,CAAD,CAAT;AACAE,IAAAA,WAAW,CAACU,sBAAD,CAAX;AACAR,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAE,IAAAA,QAAQ,CAACE,CAAC,CAACE,aAAF,CAAgBC,KAAjB,CAAR;AACD,GAVD;;AAWA,QAAMO,OAAO,GAAIV,CAAD,IAAO;AACrBR,IAAAA,SAAS,CAAC,CAAD,CAAT;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAE,IAAAA,QAAQ,CAACE,CAAC,CAACE,aAAF,CAAgBS,SAAjB,CAAR;AACD,GALD;;AAMA,QAAMC,SAAS,GAAIZ,CAAD,IAAO;AACvB,QAAIA,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AACpBrB,MAAAA,SAAS,CAAC,CAAD,CAAT;AACAI,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAE,MAAAA,QAAQ,CAACL,QAAQ,CAACF,MAAD,CAAT,CAAR;AACD,KAJD,MAIO,IAAIS,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AAC3B,aAAOtB,MAAM,KAAK,CAAX,GAAe,IAAf,GAAsBC,SAAS,CAACD,MAAM,GAAG,CAAV,CAAtC;AACD,KAFM,MAEA,IAAIS,CAAC,CAACa,OAAF,KAAc,EAAlB,EAAsB;AAC3B,aAAOtB,MAAM,GAAG,CAAT,KAAeE,QAAQ,CAACqB,MAAxB,GAAiC,IAAjC,GAAwCtB,SAAS,CAACD,MAAM,GAAG,CAAV,CAAxD;AACD;AACF,GAVD;;AAWA,QAAMwB,kBAAkB,GAAG,MAAM;AAC/B,QAAIpB,MAAM,IAAIE,KAAd,EAAqB;AACnB,UAAIJ,QAAQ,CAACqB,MAAb,EAAqB;AACnB,4BACE;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA,oBACGrB,QAAQ,CAACuB,GAAT,CAAa,CAACV,UAAD,EAAaW,KAAb,KAAuB;AACnC,gBAAIC,SAAJ;;AACA,gBAAID,KAAK,KAAK1B,MAAd,EAAsB;AACpB2B,cAAAA,SAAS,GAAG,QAAZ;AACD;;AACD,gCACE;AAAI,cAAA,SAAS,EAAEA,SAAf;AAA2C,cAAA,OAAO,EAAER,OAApD;AAAA,wBACGJ;AADH,eAA+BA,UAA/B;AAAA;AAAA;AAAA;AAAA,oBADF;AAKD,WAVA;AADH;AAAA;AAAA;AAAA;AAAA,gBADF;AAeD,OAhBD,MAgBO;AACL,4BACE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF;AAKD;AACF;;AACD,wBAAO,qCAAP;AACD,GA3BD;;AA6BA,QAAM,CAAC0B,SAAD,EAAYC,OAAZ,IAAuB5D,QAAQ,CAAC,CACpC;AACE4C,IAAAA,KAAK,EAAE,CADT;AAEErC,IAAAA,OAAO,EAAE,EAFX;AAGEC,IAAAA,YAAY,EAAE,EAHhB;AAIEC,IAAAA,SAAS,EAAE;AAJb,GADoC,CAAD,CAArC;;AASA,QAAMoD,YAAY,GAAIC,IAAD,IAAU;AAC7BH,IAAAA,SAAS,CAACG,IAAI,CAAClB,KAAN,CAAT,GAAwBkB,IAAxB;AACD,GAFD;;AAIA,QAAMC,SAAS,GAAG,MAAM;AACtBrD,IAAAA,aAAa,GAAGsD,UAAU,CAACtD,aAAD,CAAV,GAA4B,CAA5C;AACA,QAAIuD,WAAW,GAAG,CAAC,GAAGN,SAAJ,CAAlB;AACAM,IAAAA,WAAW,CAACvD,aAAD,CAAX,GAA6B;AAC3BkC,MAAAA,KAAK,EAAElC,aADoB;AAE3BH,MAAAA,OAAO,EAAE,EAFkB;AAG3BC,MAAAA,YAAY,EAAE,EAHa;AAI3BC,MAAAA,SAAS,EAAE;AAJgB,KAA7B;AAMAmD,IAAAA,OAAO,CAACK,WAAD,CAAP;AACD,GAVD;;AAYA,QAAMlD,SAAS,GAAI6B,KAAD,IAAW;AAC3B,QAAIe,SAAS,CAAClB,MAAV,GAAmB,CAAvB,EAA0B;AACxB,UAAIwB,WAAW,GAAG,CAAC,GAAGN,SAAJ,CAAlB;AACA,UAAIO,aAAa,GAAGD,WAAW,CAACE,SAAZ,CAAuBC,CAAD,IAAOA,CAAC,CAACxB,KAAF,IAAWA,KAAxC,CAApB;;AACA,UAAIsB,aAAa,GAAG,CAAC,CAArB,EAAwB;AACtBD,QAAAA,WAAW,CAACI,MAAZ,CAAmBH,aAAnB,EAAkC,CAAlC;AACAN,QAAAA,OAAO,CAACK,WAAD,CAAP;AACD;AACF;AACF,GATD;;AAWA,QAAMK,aAAa,GAAG,CAACC,KAAD,EAAQ3B,KAAR,KAAkB;AACtC,QAAI2B,KAAK,CAACC,GAAN,KAAc,OAAlB,EAA2B;AACzBnE,MAAAA,QAAQ,CAAC6C,IAAT,CAAcqB,KAAK,CAACtB,MAAN,CAAanB,KAA3B;AACAiC,MAAAA,SAAS;AACT3D,MAAAA,IAAI,CAAC8C,IAAL,CAAUJ,MAAV;AACAyB,MAAAA,KAAK,CAACtB,MAAN,CAAanB,KAAb,GAAqB,EAArB;AACA2C,MAAAA,OAAO,CAACC,GAAR,CAAYtE,IAAZ;AACAqE,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAGf,SAAf;AACD;AACF,GATD;;AAUA,QAAMrD,YAAY,GAAG;AACnBC,IAAAA,OAAO,EAAE,EADU;AAEnBC,IAAAA,YAAY,EAAE,CAFK;AAGnBC,IAAAA,SAAS,EAAE;AAHQ,GAArB;AAKA,QAAM,CAACqC,MAAD,EAASC,SAAT,IAAsB/C,QAAQ,CAACM,YAAD,CAApC;;AAEA,QAAMqE,YAAY,GAAIhD,CAAD,IAAO;AAC1B8C,IAAAA,OAAO,CAACC,GAAR,CAAY,GAAGf,SAAf;AACAxD,IAAAA,OAAO,CAACyE,WAAR,CAAoBC,aAApB,GAAoC,iBAApC;AAEAlD,IAAAA,CAAC,CAACmD,cAAF;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY/D,QAAZ;;AACA,SAAK,IAAIiC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGe,SAAS,CAAClB,MAAtC,EAA8CG,KAAK,EAAnD,EAAuD;AACrDhC,MAAAA,KAAK,CAACmE,SAAN,CAAgB,GAAGpB,SAAS,CAACf,KAAD,CAA5B,EAAqC,MAAM,CAAE,CAA7C;AACD;;AACDgB,IAAAA,OAAO,CAAC,CACN;AACEhB,MAAAA,KAAK,EAAE,CADT;AAEErC,MAAAA,OAAO,EAAE,EAFX;AAGEC,MAAAA,YAAY,EAAE,EAHhB;AAIEC,MAAAA,SAAS,EAAE;AAJb,KADM,CAAD,CAAP;AASAuE,IAAAA,MAAM,CAACC,KAAP,CAAa,eAAb;AACD,GAnBD;;AAoBA,WAASC,eAAT,CAAyBX,KAAzB,EAAgC;AAC9BhC,IAAAA,SAAS,CAACgC,KAAD,CAAT;AACAD,IAAAA,aAAa,CAACC,KAAD,CAAb;AACD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,2BACE;AAAS,MAAA,SAAS,EAAC,KAAnB;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAM,QAAA,SAAS,EAAC,kBAAhB;AAAmC,QAAA,QAAQ,EAAEI,YAA7C;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,SAAS,EAAC,eAFZ;AAGE,cAAA,IAAI,EAAC,MAHP;AAIE,cAAA,WAAW,EAAC,oBAJd;AAKE,cAAA,QAAQ,EAAEjD,QALZ;AAME,cAAA,SAAS,EAAEwD,eANb;AAOE,cAAA,KAAK,EAAE1D;AAPT;AAAA;AAAA;AAAA;AAAA,oBADF,EAUGkB,kBAAkB,EAVrB,eAWE;AACE,cAAA,IAAI,EAAC,QADP;AAEE,cAAA,SAAS,EAAC,iBAFZ;AAGE,6BAAY,OAHd;AAIE,6BAAY,eAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAqBE;AAAA,mCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBArBF,eAyBE;AAAO,YAAA,SAAS,EAAC,OAAjB;AAAyB,YAAA,EAAE,EAAC,WAA5B;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,aAAjB;AAAA,qCACE;AAAA,wCACE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,eAIE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAKE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF,eAME;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAWE;AAAA,wBACGiB,SAAS,CAAChB,GAAV,CAAc,CAAC9B,GAAD,EAAM+B,KAAN,KAAgB;AAC7B,oBAAI/B,GAAJ,EACE,oBACE,QAAC,QAAD;AAEE,kBAAA,GAAG,EAAEA,GAFP;AAGE,kBAAA,gBAAgB,EAAEgD,YAHpB;AAIE,kBAAA,SAAS,EAAE9C;AAJb,mBACO6B,KADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAQH,eAVA;AADH;AAAA;AAAA;AAAA;AAAA,oBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzBF,eAkDE;AAAO,YAAA,SAAS,EAAC,oDAAjB;AAAA,mCACE;AAAA,qCACE;AAAA,uCACE;AAAA,yCACE;AAAK,oBAAA,SAAS,EAAC,YAAf;AAAA,4CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AAAM,sBAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJF,eAKE;AAAM,sBAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAlDF,eAiEE;AAAK,YAAA,SAAS,EAAC,sBAAf;AAAA,mCACE;AACE,cAAA,SAAS,EAAC,iBADZ;AAEE,cAAA,KAAK,EAAC,cAFR;AAGE,cAAA,OAAO,EAAE+B;AAHX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAjEF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAkFD;;IA/NQjB,G;;MAAAA,G;;AAiOT,MAAMyB,eAAe,GAAIC,KAAD,KAAY;AAClCC,EAAAA,OAAO,EAAED,KAAK,CAACE,GAAN,CAAUC;AADe,CAAZ,CAAxB;;AAIA,MAAMC,gBAAgB,GAAG;AACvBT,EAAAA,SAAS,EAAE5E,OAAO,CAACsF;AADI,CAAzB;AAIA,eAAevF,OAAO,CAACiF,eAAD,EAAkBK,gBAAlB,CAAP,CAA2C9B,GAA3C,CAAf","sourcesContent":["import React, { useState } from \"react\";\nimport AddItemModal from \"./AddItemModal\";\nimport \"./forms.scss\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../actions/pos\";\nvar cart = [];\nconst products = [];\nconst intialvalues = {\n  ItemSKU: \"\",\n  ItemQuantity: 1,\n  ItemPrice: 0,\n};\n\nvar tableRowIndex = 0;\n\n//TableRow\nfunction TableRow({ row, handleDataChange, deleteRow }, props) {\n  var price,\n    quantity = 0;\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = (e) => {\n    const suggestions = [\"123\", \"456\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(\n      (suggestion) => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1\n    );\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n    handleInputChange(e);\n  };\n  const onClick = (e) => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n  const onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return (\n          <ul className=\"autocomplete\">\n            {filtered.map((suggestion, index) => {\n              let className;\n              if (index === active) {\n                className = \"active\";\n              }\n              return (\n                <li className={className} key={suggestion} onClick={onClick}>\n                  {suggestion}\n                </li>\n              );\n            })}\n          </ul>\n        );\n      } else {\n        return (\n          <div className=\"no-autocomplete\">\n            <em>No product found</em>\n          </div>\n        );\n      }\n    }\n    return <></>;\n  };\n\n  const [values, setValues] = useState(intialvalues);\n  function handleInputChange(e) {\n    const { name, value } = e.target;\n    setValues({\n      ...values,\n      [name]: value,\n    });\n    cart.push(values);\n  }\n\n  const index = row.index;\n  const [ItemQuantity, handleChangeItemQuantity] = useState(row.ItemQuantity);\n  const [ItemSKU, handleChangeItemSKU] = useState(row.ItemSKU);\n  const [ItemPrice, handleChangeItemPrice] = useState(row.ItemPrice);\n\n  const updateValues = (e) => {\n    var inputName = e.target.name;\n    var inputValue = e.target.value;\n    if (inputName == \"ItemQuantity\") {\n      handleChangeItemQuantity(inputValue);\n    } else if (inputName == \"ItemSKU\") {\n      handleChangeItemSKU(inputValue);\n    } else if (inputName == \"ItemPrice\") {\n      handleChangeItemPrice(inputValue);\n    }\n\n    handleDataChange({\n      index: index,\n      ItemQuantity: ItemQuantity,\n      ItemSKU: ItemSKU,\n      ItemPrice: ItemPrice,\n    });\n  };\n\n  const removeRow = () => {\n    deleteRow(index);\n  };\n\n  return (\n    <tr>\n      <th scope=\"row\">{index}</th>\n      <td>\n        <div className=\"form-field col-lg-6\">\n          <input\n            className=\"input-text js-input\"\n            type=\"text\"\n            onChange={onChange}\n            onKeyDown={onKeyDown}\n            name=\"ItemSKU\"\n            value={products[index]}\n          />\n          {renderAutocomplete()}\n        </div>\n      </td>\n      <td>\n        <div className=\"form-field col-lg-6 \">\n          <input\n            name=\"ItemQuantity\"\n            onChange={(e) => updateValues(e)}\n            id=\"ItemQuantity\"\n            className=\"input-text js-input\"\n            type=\"Number\"\n            required\n          />\n        </div>\n      </td>\n      <td>\n        <div className=\"form-field col-lg-6 \">\n          <input\n            name=\"ItemPrice\"\n            onChange={(e) => updateValues(e)}\n            id=\"Price\"\n            className=\"input-text js-input\"\n            type=\"Amount\"\n          />\n        </div>\n      </td>\n      <td>\n        {values.ItemPrice * values.ItemQuantity}\n        {\" PKR\"}\n      </td>\n      <td>\n        <button type=\"button\" className=\"btn btn-remove\" onClick={removeRow}>\n          &times;\n        </button>\n      </td>\n    </tr>\n  );\n}\n\n//Add\nfunction Add(props) {\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = (e) => {\n    const suggestions = [\"121241\", \"143123\", \"8471239\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(\n      (suggestion) => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1\n    );\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n  };\n  const onClick = (e) => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n  const onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return (\n          <ul className=\"autocomplete\">\n            {filtered.map((suggestion, index) => {\n              let className;\n              if (index === active) {\n                className = \"active\";\n              }\n              return (\n                <li className={className} key={suggestion} onClick={onClick}>\n                  {suggestion}\n                </li>\n              );\n            })}\n          </ul>\n        );\n      } else {\n        return (\n          <div className=\"no-autocomplete\">\n            <em>Not found</em>\n          </div>\n        );\n      }\n    }\n    return <></>;\n  };\n\n  const [talbeRows, setRows] = useState([\n    {\n      index: 0,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\",\n    },\n  ]);\n\n  const handleChange = (data) => {\n    talbeRows[data.index] = data;\n  };\n\n  const addNewRow = () => {\n    tableRowIndex = parseFloat(tableRowIndex) + 1;\n    var updatedRows = [...talbeRows];\n    updatedRows[tableRowIndex] = {\n      index: tableRowIndex,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\",\n    };\n    setRows(updatedRows);\n  };\n\n  const deleteRow = (index) => {\n    if (talbeRows.length > 1) {\n      var updatedRows = [...talbeRows];\n      var indexToRemove = updatedRows.findIndex((x) => x.index == index);\n      if (indexToRemove > -1) {\n        updatedRows.splice(indexToRemove, 1);\n        setRows(updatedRows);\n      }\n    }\n  };\n\n  const handleKeyDown = (event, index) => {\n    if (event.key === \"Enter\") {\n      products.push(event.target.value);\n      addNewRow();\n      cart.push(values);\n      event.target.value = \"\";\n      console.log(cart);\n      console.log(...talbeRows);\n    }\n  };\n  const intialvalues = {\n    ItemSKU: \"\",\n    ItemQuantity: 0,\n    ItemPrice: 0,\n  };\n  const [values, setValues] = useState(intialvalues);\n\n  const handleSubmit = (e) => {\n    console.log(...talbeRows)\n    actions.TableString.StringOfTable = \"Bill_Child_Temp\";\n\n    e.preventDefault();\n    console.log(TableRow);\n    for (let index = 0; index < talbeRows.length; index++) {\n      props.createPos(...talbeRows[index], () => {});\n    }\n    setRows([\n      {\n        index: 0,\n        ItemSKU: \"\",\n        ItemQuantity: \"\",\n        ItemPrice: \"\",\n      },\n    ]);\n\n    window.alert(\"Product Added\");\n  };\n  function onKeyDownparent(event) {\n    onKeyDown(event);\n    handleKeyDown(event);\n  }\n\n  return (\n    <div className=\"container\">\n      <section className=\"pos\">\n        <h1 className=\"title\">Point Of Sales Terminal</h1>\n        <form className=\"contact-form row\" onSubmit={handleSubmit}>\n          <div className=\"row\">\n            <div className=\"search__container\">\n              <input\n                name=\"product\"\n                className=\"search__input\"\n                type=\"text\"\n                placeholder=\"Enter Product Name\"\n                onChange={onChange}\n                onKeyDown={onKeyDownparent}\n                value={input}\n              />\n              {renderAutocomplete()}\n              <button\n                type=\"button\"\n                className=\"btn btn-primary\"\n                data-toggle=\"modal\"\n                data-target=\"#exampleModal\"\n              >\n                +\n              </button>\n            </div>\n            <div>\n              <AddItemModal />\n            </div>\n\n            <table className=\"table\" id=\"customers\">\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">#</th>\n                  <th scope=\"col\">SKU</th>\n                  <th scope=\"col\">Quantity</th>\n                  <th scope=\"col\">Unit Price</th>\n                  <th scope=\"col\">SubTotal</th>\n                  <th scope=\"col\">Delete</th>\n                </tr>\n              </thead>\n              <tbody>\n                {talbeRows.map((row, index) => {\n                  if (row)\n                    return (\n                      <TableRow\n                        key={index}\n                        row={row}\n                        handleDataChange={handleChange}\n                        deleteRow={deleteRow}\n                      ></TableRow>\n                    );\n                })}\n              </tbody>\n            </table>\n            <table className=\"table table-condensed table-bordered table-striped\">\n              <tbody>\n                <tr>\n                  <td>\n                    <div className=\"pull-right\">\n                      <b>Items:</b>\n                      <span className=\"total_quantity\">2.00</span>\n\n                      <b>Total: </b>\n                      <span className=\"price_total\">6.00</span>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <div className=\"form-field col-lg-12\">\n              <input\n                className=\"btn btn-primary\"\n                value=\"Add Products\"\n                onClick={handleSubmit}\n              />\n            </div>\n          </div>\n        </form>\n      </section>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  poslist: state.pos.list,\n});\n\nconst mapActionToProps = {\n  createPos: actions.create,\n};\n\nexport default connect(mapStateToProps, mapActionToProps)(Add);\n"]},"metadata":{},"sourceType":"module"}