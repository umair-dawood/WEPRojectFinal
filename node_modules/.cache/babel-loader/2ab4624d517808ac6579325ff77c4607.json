{"ast":null,"code":"var _jsxFileName = \"/Users/maazasim/homeelectronics/src/Components/Add.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport AddItemModal from './AddItemModal';\nimport './forms.scss';\nimport { connect } from 'react-redux';\nimport * as actions from '../actions/pos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar cart = [];\nconst products = [];\nconst intialvalues = {\n  ItemSKU: '',\n  ItemQuantity: 1,\n  ItemPrice: 0\n};\nvar tableRowIndex = 0;\n\nfunction TableRow(_ref, props) {\n  _s();\n\n  let {\n    row,\n    handleDataChange,\n    deleteRow\n  } = _ref;\n  var price,\n      quantity = 0;\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = e => {\n    const suggestions = [\"123\", \"456\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(suggestion => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1);\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n    handleInputChange(e);\n  };\n\n  const onClick = e => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n\n  const onKeyDown = e => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"autocomplete\",\n          children: filtered.map((suggestion, index) => {\n            let className;\n\n            if (index === active) {\n              className = \"active\";\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: className,\n              onClick: onClick,\n              children: suggestion\n            }, suggestion, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 18\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 12\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-autocomplete\",\n          children: /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"No product found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 12\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  };\n\n  const [values, setValues] = useState(intialvalues);\n\n  function handleInputChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n    cart.push(values);\n  }\n\n  const index = row.index;\n  const [ItemQuantity, handleChangeItemQuantity] = useState(row.ItemQuantity);\n  const [ItemSKU, handleChangeItemSKU] = useState(row.ItemSKU);\n  const [ItemPrice, handleChangeItemPrice] = useState(row.ItemPrice);\n\n  const updateValues = e => {\n    var inputName = e.target.name;\n    var inputValue = e.target.value;\n\n    if (inputName == 'ItemQuantity') {\n      handleChangeItemQuantity(inputValue);\n    } else if (inputName == 'ItemSKU') {\n      handleChangeItemSKU(inputValue);\n    } else if (inputName == 'ItemPrice') {\n      handleChangeItemPrice(inputValue);\n    }\n\n    handleDataChange({\n      index: index,\n      ItemQuantity: ItemQuantity,\n      ItemSKU: ItemSKU,\n      ItemPrice: ItemPrice\n    });\n  };\n\n  const removeRow = () => {\n    deleteRow(index);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n      scope: \"row\",\n      children: index\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-text js-input\",\n          type: \"text\",\n          onChange: onChange,\n          onKeyDown: onKeyDown,\n          name: \"ItemSKU\",\n          value: products[index]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }, this), renderAutocomplete()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6 \",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"ItemQuantity\",\n          onChange: e => updateValues(e),\n          id: \"ItemQuantity\",\n          className: \"input-text js-input\",\n          type: \"Number\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-field col-lg-6 \",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"ItemPrice\",\n          onChange: e => updateValues(e),\n          id: \"Price\",\n          className: \"input-text js-input\",\n          type: \"Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: [values.ItemPrice * values.ItemQuantity, \" PKR\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-remove\",\n        onClick: removeRow,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 7\n  }, this);\n}\n\n_s(TableRow, \"Ruw8YK3X4y3dttBTn5ZyeZE7OqA=\");\n\n_c = TableRow;\n\nfunction Add(props) {\n  _s2();\n\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n\n  const onChange = e => {\n    const suggestions = [\"121241\", \"143123\", \"8471239\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(suggestion => suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1);\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n  };\n\n  const onClick = e => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText);\n  };\n\n  const onKeyDown = e => {\n    if (e.keyCode === 13) {\n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active]);\n    } else if (e.keyCode === 38) {\n      return active === 0 ? null : setActive(active - 1);\n    } else if (e.keyCode === 40) {\n      return active - 1 === filtered.length ? null : setActive(active + 1);\n    }\n  };\n\n  const renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"autocomplete\",\n          children: filtered.map((suggestion, index) => {\n            let className;\n\n            if (index === active) {\n              className = \"active\";\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: className,\n              onClick: onClick,\n              children: suggestion\n            }, suggestion, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-autocomplete\",\n          children: /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"Not found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  };\n\n  const [talbeRows, setRows] = useState([{\n    index: 0,\n    ItemSKU: \"\",\n    ItemQuantity: \"\",\n    ItemPrice: \"\"\n  }]);\n\n  const handleChange = data => {\n    talbeRows[data.index] = data;\n  };\n\n  const addNewRow = () => {\n    tableRowIndex = parseFloat(tableRowIndex) + 1;\n    var updatedRows = [...talbeRows];\n    updatedRows[tableRowIndex] = {\n      index: tableRowIndex,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\"\n    };\n    setRows(updatedRows);\n  };\n\n  const deleteRow = index => {\n    if (talbeRows.length > 1) {\n      var updatedRows = [...talbeRows];\n      var indexToRemove = updatedRows.findIndex(x => x.index == index);\n\n      if (indexToRemove > -1) {\n        updatedRows.splice(indexToRemove, 1);\n        setRows(updatedRows);\n      }\n    }\n  };\n\n  const handleKeyDown = (event, index) => {\n    if (event.key === 'Enter') {\n      products.push(event.target.value);\n      addNewRow();\n      cart.push(values);\n      event.target.value = \"\";\n      console.log(cart);\n      console.log(...talbeRows);\n    }\n  };\n\n  const intialvalues = {\n    ItemSKU: '',\n    ItemQuantity: 0,\n    ItemPrice: 0\n  };\n  const [values, setValues] = useState(intialvalues);\n\n  const handleSubmit = e => {\n    actions.TableString.StringOfTable = \"Bill_Child_Temp\";\n    e.preventDefault();\n    console.log(TableRow);\n\n    for (let index = 0; index < TableRow.length; index++) {\n      props.createPos(TableRow[index], () => {});\n    }\n\n    setRows([{\n      index: 0,\n      ItemSKU: \"\",\n      ItemQuantity: \"\",\n      ItemPrice: \"\"\n    }]);\n    cart = [];\n    window.alert(\"Product Added\");\n  };\n\n  function onKeyDownparent(event) {\n    onKeyDown(event);\n    handleKeyDown(event);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"pos\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"Point Of Sales Terminal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"contact-form row\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search__container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"product\",\n              className: \"search__input\",\n              type: \"text\",\n              placeholder: \"Enter Product Name\",\n              onChange: onChange,\n              onKeyDown: onKeyDownparent,\n              value: input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 9\n            }, this), renderAutocomplete(), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModal\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(AddItemModal, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 3\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            id: \"customers\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"thead-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Unit Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"SubTotal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 7\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: talbeRows.map((row, index) => {\n                if (row) return /*#__PURE__*/_jsxDEV(TableRow, {\n                  row: row,\n                  handleDataChange: handleChange,\n                  deleteRow: deleteRow\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-condensed table-bordered table-striped\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"pull-right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Items:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"total_quantity\",\n                      children: \"2.00\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Total: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 9\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"price_total\",\n                      children: \"6.00\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 10\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 9\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 8\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-field col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"btn btn-primary\",\n              value: \"Add Products\",\n              onClick: handleSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 18\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Add, \"n09uha0ilvpX3IBYgUp0eTgzw+M=\");\n\n_c2 = Add;\n\nconst mapStateToProps = state => ({\n  poslist: state.pos.list\n});\n\nconst mapActionToProps = {\n  createPos: actions.create\n};\nexport default connect(mapStateToProps, mapActionToProps)(Add);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TableRow\");\n$RefreshReg$(_c2, \"Add\");","map":{"version":3,"sources":["/Users/maazasim/homeelectronics/src/Components/Add.js"],"names":["React","useState","AddItemModal","connect","actions","cart","products","intialvalues","ItemSKU","ItemQuantity","ItemPrice","tableRowIndex","TableRow","props","row","handleDataChange","deleteRow","price","quantity","active","setActive","filtered","setFiltered","isShow","setIsShow","input","setInput","onChange","e","suggestions","currentTarget","value","newFilteredSuggestions","filter","suggestion","toLowerCase","indexOf","handleInputChange","onClick","innerText","onKeyDown","keyCode","length","renderAutocomplete","map","index","className","values","setValues","name","target","push","handleChangeItemQuantity","handleChangeItemSKU","handleChangeItemPrice","updateValues","inputName","inputValue","removeRow","Add","talbeRows","setRows","handleChange","data","addNewRow","parseFloat","updatedRows","indexToRemove","findIndex","x","splice","handleKeyDown","event","key","console","log","handleSubmit","TableString","StringOfTable","preventDefault","createPos","window","alert","onKeyDownparent","mapStateToProps","state","poslist","pos","list","mapActionToProps","create"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport AddItemModal from './AddItemModal';\nimport './forms.scss'\nimport {connect} from 'react-redux';\nimport * as actions from '../actions/pos';\nvar cart=[];\nconst products = [];\nconst intialvalues={\n\n  \n  ItemSKU:'',\n  ItemQuantity:1,\n  ItemPrice:0,\n}\n\n\n\nvar tableRowIndex = 0;\nfunction  TableRow ({row, handleDataChange, deleteRow},props) {\n    var price,quantity=0;\n   const [active, setActive] = useState(0);\n   const [filtered, setFiltered] = useState([]);\n   const [isShow, setIsShow] = useState(false);\n   const [input, setInput] = useState(\"\");\n   \n   const onChange = e => {\n     const  suggestions  = [\"123\",\"456\"];\n     const input = e.currentTarget.value;\n     const newFilteredSuggestions = suggestions.filter(\n       suggestion =>\n         suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1\n     );\n     setActive(0);\n     setFiltered(newFilteredSuggestions);\n     setIsShow(true);\n     setInput(e.currentTarget.value)\n     handleInputChange(e);\n   };\n const onClick = e => {\n     setActive(0);\n     setFiltered([]);\n     setIsShow(false);\n     setInput(e.currentTarget.innerText)\n   };\n const onKeyDown = e => {\n     if (e.keyCode === 13) { \n       setActive(0);\n       setIsShow(false);\n       setInput(filtered[active])\n     }\n     else if (e.keyCode === 38) { \n       return (active === 0) ? null : setActive(active - 1);\n     }\n     else if (e.keyCode === 40) { \n       return (active - 1 === filtered.length) ? null : setActive(active + 1);\n     }\n   };\n const renderAutocomplete = () => {\n     if (isShow && input) {\n       if (filtered.length) {\n         return (\n           <ul className=\"autocomplete\">\n             {filtered.map((suggestion, index) => {\n               let className;\n               if (index === active) {\n                 className = \"active\";\n               }\n               return (\n                 <li className={className} key={suggestion} onClick={onClick}>\n                   {suggestion}\n                 </li>\n               );\n             })}\n           </ul>\n         );\n       } else {\n         return (\n           <div className=\"no-autocomplete\">\n             <em>No product found</em>\n           </div>\n         );\n       }\n     }\n     return <></>;\n   }\n   \n   \n   \n   \n \n   const [values,setValues] = useState(intialvalues);\n   function handleInputChange(e){\n     \n     const {name,value}=e.target\n     setValues({\n       ...values,\n       [name]: value\n\n      })\n      cart.push(values)\n\n\n    }\n   \n\n   const index = row.index\n   const [ItemQuantity, handleChangeItemQuantity] = useState(row.ItemQuantity);\n   const [ItemSKU, handleChangeItemSKU] = useState(row.ItemSKU);\n   const [ItemPrice, handleChangeItemPrice] = useState(row.ItemPrice);\n  \n   const updateValues = e => {\n    var inputName = e.target.name\n    var inputValue = e.target.value\n      if(inputName == 'ItemQuantity'){\n         handleChangeItemQuantity(inputValue)\n      }else if(inputName == 'ItemSKU'){\n         handleChangeItemSKU(inputValue)\n      }\n      else if(inputName == 'ItemPrice'){\n        handleChangeItemPrice(inputValue)\n     }\n\n      handleDataChange({\n         index: index,\n         ItemQuantity: ItemQuantity,\n         ItemSKU: ItemSKU,\n         ItemPrice: ItemPrice\n      })\n   }\n\n   const removeRow = () => {\n      deleteRow(index)\n   }\n\n   return(\n     \n      <tr>\n          <th scope=\"row\">{index}</th>\n      <td><div className=\"form-field col-lg-6\">\n      <input className=\"input-text js-input\"\n        type=\"text\"\n        onChange={onChange}\n        onKeyDown={onKeyDown}\n        name=\"ItemSKU\"\n        value={products[index]}\n      />\n      {renderAutocomplete()}\n\n      </div>    \n      </td>\n      <td>\n        <div className=\"form-field col-lg-6 \">\n          <input name=\"ItemQuantity\" onChange={(e)=>updateValues(e)}    id=\"ItemQuantity\" className=\"input-text js-input\" type=\"Number\" required/>\n        </div>\n      </td>\n      <td>\n        <div className=\"form-field col-lg-6 \">\n            <input name=\"ItemPrice\" onChange={(e)=>updateValues(e)}   id=\"Price\" className=\"input-text js-input\" type=\"Amount\"  />\n        </div>\n      </td>\n      <td>\n        {values.ItemPrice*values.ItemQuantity}{\" PKR\"}\n      </td>\n      <td><button type=\"button\" className=\"btn btn-remove\" onClick={removeRow}>&times;</button></td>\n      </tr>\n        \n   )\n}\n\nfunction Add(props) {\n  const [active, setActive] = useState(0);\n  const [filtered, setFiltered] = useState([]);\n  const [isShow, setIsShow] = useState(false);\n  const [input, setInput] = useState(\"\");\n  \n  const onChange = e => {\n    const  suggestions  = [\"121241\",\"143123\",\"8471239\"];\n    const input = e.currentTarget.value;\n    const newFilteredSuggestions = suggestions.filter(\n      suggestion =>\n        suggestion.toLowerCase().indexOf(input.toLowerCase()) > -1\n    );\n    setActive(0);\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value)\n  };\nconst onClick = e => {\n    setActive(0);\n    setFiltered([]);\n    setIsShow(false);\n    setInput(e.currentTarget.innerText)\n  };\nconst onKeyDown = e => {\n    if (e.keyCode === 13) { \n      setActive(0);\n      setIsShow(false);\n      setInput(filtered[active])\n    }\n    else if (e.keyCode === 38) { \n      return (active === 0) ? null : setActive(active - 1);\n    }\n    else if (e.keyCode === 40) { \n      return (active - 1 === filtered.length) ? null : setActive(active + 1);\n    }\n  };\nconst renderAutocomplete = () => {\n    if (isShow && input) {\n      if (filtered.length) {\n        return (\n          <ul className=\"autocomplete\">\n            {filtered.map((suggestion, index) => {\n              let className;\n              if (index === active) {\n                className = \"active\";\n              }\n              return (\n                <li className={className} key={suggestion} onClick={onClick}>\n                  {suggestion}\n                </li>\n              );\n            })}\n          </ul>\n        );\n      } else {\n        return (\n          <div className=\"no-autocomplete\">\n            <em>Not found</em>\n          </div>\n        );\n      }\n    }\n    return <></>;\n  }\n\n   const [talbeRows, setRows] = useState([{\n         index: 0,\n         ItemSKU: \"\",\n         ItemQuantity: \"\",\n         ItemPrice:\"\"\n\n      }\n   ]);\n\n   \n   const handleChange = data => {\n      talbeRows[data.index] = data\n      \n   }\n\n   \n   const addNewRow = () => {\n      tableRowIndex = parseFloat(tableRowIndex) + 1\n      var updatedRows = [...talbeRows]\n      updatedRows[tableRowIndex] = {index: tableRowIndex, ItemSKU: \"\", ItemQuantity: \"\",ItemPrice:\"\"}\n      setRows(updatedRows)\n   }\n   \n   \n   const deleteRow = (index) => {\n      if(talbeRows.length > 1){\n         var updatedRows = [...talbeRows]\n         var indexToRemove = updatedRows.findIndex(x => x.index == index);\n         if(indexToRemove > -1){\n            updatedRows.splice(indexToRemove, 1)\n            setRows(updatedRows);\n         }\n      }\n   }\n\n   const handleKeyDown = (event,index) => {\n    if (event.key === 'Enter') {\n      products.push(event.target.value)\n      addNewRow();\n      cart.push(values);\n      event.target.value=\"\";\n      console.log(cart);\n      console.log(...talbeRows)\n    }\n   }\n   const intialvalues={\n\n  \n    ItemSKU:'',\n    ItemQuantity:0,\n    ItemPrice:0,\n }\n   const [values,setValues] = useState(intialvalues);\n\n\n   const handleSubmit =e=>{\n    actions.TableString.StringOfTable=\"Bill_Child_Temp\";\n\n      e.preventDefault();\n      console.log(TableRow);\n      for (let index = 0; index < TableRow.length; index++) {\n        props.createPos(TableRow[index],()=>{})\n        \n      }\n      setRows([{\n        index: 0,\n        ItemSKU: \"\",\n        ItemQuantity: \"\",\n        ItemPrice:\"\"\n\n      }\n    ])\n    cart=[]\n      \n      window.alert(\"Product Added\")\n      \n   }\n   function onKeyDownparent(event){\n     onKeyDown(event);\n     handleKeyDown(event);\n\n   }\n   \n  return (\n    <div className=\"container\">\n\n                 <section className=\"pos\">\n                   \n\n                 <h1 className=\"title\">Point Of Sales Terminal</h1>\n   <form className=\"contact-form row\" onSubmit={handleSubmit}>\n   <div className=\"row\">\n\n\n\n\n<div className=\"search__container\">\n        <input name=\"product\"  className=\"search__input\" type=\"text\" placeholder=\"Enter Product Name\" \n        onChange={onChange}\n        onKeyDown={onKeyDownparent}\n        value={input}\n        \n      />\n      {renderAutocomplete()}\n      <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModal\">\n      +\n    </button>\n</div>\n<div >\n\n  <AddItemModal />\n  </div>\n\n       <table className=\"table\" id=\"customers\">\n       <thead className=\"thead-light\">\n    <tr>\n      <th scope=\"col\">#</th>\n      <th scope=\"col\">SKU</th>\n      <th scope=\"col\">Quantity</th>\n      <th scope=\"col\">Unit Price</th>\n      <th scope=\"col\">SubTotal</th>\n      <th scope=\"col\">Delete</th>\n    </tr>\n  </thead>\n          <tbody>\n               {\n                  talbeRows.map((row, index) => {\n                     if(row)\n                     return(\n                        <TableRow key={index} row={row} handleDataChange={handleChange} deleteRow={deleteRow}></TableRow>\n                        \n                     )\n                  })\n               }\n          </tbody>\n       </table>\n       <table className=\"table table-condensed table-bordered table-striped\">\n\t\t\t\t\t\t<tbody><tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div className=\"pull-right\">\n\t\t\t\t\t\t\t\t<b>Items:</b> \n\t\t\t\t\t\t\t\t<span className=\"total_quantity\">2.00</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<b>Total: </b>\n\t\t\t\t\t\t\t\t\t<span className=\"price_total\">6.00</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody></table>\n                    <div className=\"form-field col-lg-12\">\n         <input  className=\"btn btn-primary\"  value=\"Add Products\" onClick={handleSubmit}/>\n      </div>\n      \n      \n       </div>\n       \n      \n       </form>\n       </section>\n    </div>\n  );\n}\n\nconst mapStateToProps = state=>({\n  poslist: state.pos.list  \n})\n\nconst mapActionToProps =  {\n  createPos: actions.create,\n  \n  \n}\n\nexport default connect(mapStateToProps,mapActionToProps)(Add);\n"]},"metadata":{},"sourceType":"module"}